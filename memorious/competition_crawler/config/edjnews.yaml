name: edjnews

description: 'just testing, no worrying'

# schedule: weekly
pipeline:

  init:
    method: sequence
    params:
      start: 0
      step: 10
      stop : 320
    handle:
      pass: seed

  seed:
    method: seed
    params:
      url: https://www.europeandatajournalism.eu/eng/News/Data-news/(offset)/%(number)s
    handle:
      pass: fetch

  fetch:
    method: fetch
    handle:
      pass: parse

  parse:
    method: parse
    params:
      include_paths:
        - './/h3[@class="media-heading"]'
      store:
        and:
          - mime_type: 'text/html'
          - not:
              pattern: '.*/\(offset\)/.*'

      meta:
        author: './/div[@class="authors"]/a'
        source: './/div[@class="magazines"]/a'
    handle:
      store: store
      fetch: fetch

  store:
    method: directory
    params:
# remind to add "/" in front of path if run through Docker
# remind to remove "/" in front of path if run locally
      path: data/results
